<div class='userDetailsContainer'>
    <div>
        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="account">
            <i class="material-icons">account_circle</i>
            <span>Logged in as: {{user.firstName}} {{ user.lastName }}</span>
        </button>
        <mat-menu #menu="matMenu">
            <div>
                <button mat-menu-item appPreventDoubleClick (throttledClick)="logout()" [throttleTime]="1000">
                    <span>Log out</span>
                </button>
            </div>
        </mat-menu>
    </div>
</div>

<router-outlet></router-outlet>

<h4>Edit Users:</h4>

<div class="all-container">
    <table matSort (matSortChange)="sortDataUser($event)" class="table table-hover">
        <thead class="thead-dark">
            <tr>
                <th mat-sort-header="id">id</th>
                <th mat-sort-header="email">E-mail</th>
                <th mat-sort-header="type">Type</th>
                <th mat-sort-header="firstName">First Name</th>
                <th mat-sort-header="lastName">Last Name</th>
                <th mat-sort-header="enable">Enable</th>
                <th mat-sort-header="leader">Leader</th>
                <th mat-sort-header="delete_user">Delete user</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let user of sortedDataUser;  let i = index">
                <td>{{ user.id }}</td>
                <td>{{ user.email }}</td>
                <td>
                    <select (change)="changeType(i, $event.srcElement.value)">
                        <option [ngValue]="user.type"> {{user.type}} </option>
                        <ng-container *ngFor="let type of types">
                            <option *ngIf="user.type != type" [ngValue]="type"> {{ type }} </option>
                        </ng-container>
                    </select>
                </td>
                <td>{{ user.firstName }}</td>
                <td>{{ user.lastName }}</td>
                <td>
                    <select (change)="changeEnable(i, $event.srcElement.value)">
                        <option [ngValue]="user.enable"> {{user.enable}} </option>
                        <ng-container *ngFor="let enable of enables">
                            <option *ngIf="user.enable != enable" [ngValue]="enable"> {{ enable }} </option>
                        </ng-container>
                    </select>
                </td>
                <td>
                    <select (change)="changeLeader(i, $event.srcElement.value)">
                        <option [ngValue]="user.leader"> {{user.leader}} </option>
                        <ng-container *ngFor="let leader of leaders">
                            <option *ngIf="user.leader != leader" [ngValue]="leader"> {{ leader }} </option>
                        </ng-container>
                    </select>
                </td>
                <td>
                    <button appPreventDoubleClick (throttledClick)="deleteUser(user)" [throttleTime]="1000">Delete
                        user</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div>
    <button appPreventDoubleClick (throttledClick)="resetChangesUser()" [throttleTime]="1000"> Reset changes </button>
    <button appPreventDoubleClick (throttledClick)="saveChangesUser()" [throttleTime]="1000"> Save changes </button>
</div>


<br><br><br><br>
<h4>Edit Courses:</h4>

<div class="all-container">
    <table matSort (matSortChange)="sortDataCourse($event)" class="table table-hover">
        <thead class="thead-dark">
            <tr>
                <th mat-sort-header="id">id</th>
                <th mat-sort-header="courseName">Course Name</th>
                <th mat-sort-header="capacity">Capacity</th>
                <th mat-sort-header="actualCapacity">Actual Capacity</th>
                <th mat-sort-header="startDate">Start Date</th>
                <th mat-sort-header="endDate">End Date</th>
                <th mat-sort-header="projectManager">Project Manager</th>
                <th mat-sort-header="domain">Domain</th>
                <th mat-sort-header="timeInterval">Time Interval</th>
                <th mat-sort-header="delete_course">Delete course</th>

            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let course of sortedDataCourse;  let i = index">
                <td>{{ course.id }}</td>
                <td>{{ course.courseName }}</td>
                <td>{{ course.capacity }}</td>
                <td>{{ course.actualCapacity }}</td>
                <td>{{ course.startDate }}</td>
                <td>{{ course.endDate }}</td>
                <td>
                    <select (change)="changeProjectManager(i, $event.srcElement.value)">
                        <option [ngValue]="course.projectManager"> {{course.projectManager}} </option>
                        <ng-container *ngFor="let pm of projectManagers">
                            <option *ngIf="course.projectManager != pm" [ngValue]="pm"> {{ pm }} </option>
                        </ng-container>
                    </select>
                </td>
                <td>
                    <select (change)="changeDomain(i, $event.srcElement.value)">
                        <option [ngValue]="course.domain"> {{course.domain}} </option>
                        <ng-container *ngFor="let domain of domains">
                            <option *ngIf="course.domain != domain" [ngValue]="domain"> {{ domain }} </option>
                        </ng-container>
                    </select>
                </td>
                <td>{{ course.timeInterval }}</td>
                <td>
                    <button appPreventDoubleClick (throttledClick)="deleteCourse(course)" [throttleTime]="1000">Delete
                        course</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div>
    <button appPreventDoubleClick (throttledClick)="resetChangesCourse()" [throttleTime]="1000"> Reset changes </button>
    <button appPreventDoubleClick (throttledClick)="saveChangesCourse()" [throttleTime]="1000"> Save changes </button>
</div>